<!DOCTYPE html>
<html>
  <head><title>Spotify Redirect Handler</title></head>
  <body>
    <script>
      const params = new URLSearchParams(window.location.search);
      const code = params.get("code");
      const state = params.get("state");

      if (code) {
        // Post the code back to the opener window
        if (window.opener) {
          window.opener.postMessage(
            { spotify_code: code, uuid: state },
            "*" // or restrict to your origin
          );
        }

        document.body.innerHTML = `
          <h2>Spotify Authorization Complete</h2>
          <p>Authorization code has been sent to the main app.</p>
          <p>You may now close this window.</p>
        `;
      } else {
        document.body.textContent = "No code found in the URL.";
      }
    </script>  </body>
</html>

